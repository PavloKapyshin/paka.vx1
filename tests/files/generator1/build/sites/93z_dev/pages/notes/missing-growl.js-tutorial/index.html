<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Missing growl.js tutorial ← Notes ← dev.93z.org</title><link rel="stylesheet" href="/s/styles.css"><link rel="alternate" type="application/atom+xml" href="/notes/feed/" title="Recent notes from dev.93z.org"></head><body><div class="h"><ol class="h-bc"><li><a href="/" rel="home">dev.93z.org</a></li><li class="last"><a href="/notes/">Notes</a></li></ol></div><div class="c"><div class="c-i"><div class="c-p"><h1>Missing growl.js tutorial</h1><div class="n-b"><p>In 2010 I created <a href="https://github.com/originalcoding/growl.js">small JavaScript library</a> for in-browser “notifications”. Though its API was documented, no tutorial was written. Actually, this is not surprising, as growl.js is unpopular even at Original Coding: it was used in several projects, and then focus shifted to projects where work is 90% backend. But I wouldn’t be writing this just to say that, right? I prepared short introduction to library, just in case you need to understand how to use it. But it’s still better to use something modern, e.g. some <a href="http://facebook.github.io/react/">React</a> component.</p><p>First of all, there is a <a href="demo/">complete demo</a>—check it out. Basically, it contains two “panels” (green and red): each has text input and button. You type some text into input, press button, and new notification is added. Each notification type has its own settings that define its behaviour. Two types of notifications are defined in demo: <code>success</code> and <code>error</code>. “Success” notifications are shown for 5 seconds, and then disappear. “Error” ones stay on page until you “close” them. Now let’s look at the code.</p><p>At the bottom of <a href="demo/main.js"><code>main.js</code></a> there is following:</p><pre><code><span class="kd">var</span> <span class="nx">growl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Growl</span><span class="p">({</span>
    <span class="nx">element</span><span class="o">:</span> <span class="nx">growlEl</span><span class="p">,</span>
    <span class="nx">types</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">error</span><span class="o">:</span> <span class="p">{</span><span class="nx">sticky</span><span class="o">:</span> <span class="kc">true</span><span class="p">},</span>
        <span class="nx">success</span><span class="o">:</span> <span class="p">{</span><span class="nx">sticky</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">timeout</span><span class="o">:</span> <span class="mi">5000</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">bind</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">add</span><span class="o">:</span> <span class="nx">addGrowlMessage</span><span class="p">,</span>
    <span class="nx">remove</span><span class="o">:</span> <span class="nx">removeGrowlMessage</span>
<span class="p">});</span>
</code></pre><p>As you can see, new instance of <code>Growl</code> class is created and some options (growl.js calls them “settings”) are passed:</p><dl><dt><code>element</code></dt><dd>This is container for all notifications. It can be <code>HTMLElement</code> (like in demo), jQuery-wrapped <code>HTMLElement</code>, or anything else.</dd><dt><code>types</code></dt><dd>Each notification has type (e.g. <code>success</code>), and this is where you define both types and their settings. <code>sticky</code> notifications are not removed automatically. Non-<code>sticky</code> notifications are removed after <code>timeout</code> (in milliseconds) is passed (removal is done by call to <code>remove</code> function which is described below).</dd><dt><code>add</code></dt><dd>This is a function that accepts <code>element</code>, notification message (which in demo is taken from text input’s <code>value</code>), and settings (so you can get type of notification via <code>settings.type</code>); it returns notification element (anything you want, as <em>you</em> handle it in <code>remove</code>) that will be passed to <code>remove</code>. It does what you make it to do: in demo I create new <code>div</code>, add classes, set its <code>innerHTML</code>, and add to <code>element</code>. For <code>sticky</code> notifications I also create <code>span</code> with <code>click</code> handler that removes notification element from <code>element</code>.</dd><dt><code>remove</code></dt><dd>This is a function that accepts <code>element</code>, notification element (whatever you returned from <code>add</code>), and settings; it doesn’t return anything. It does what you make it to do: in demo I remove notification element from <code>element</code> (and if after that <code>element</code> contains no notification elements, the former is hidden).</dd><dt><code>bind</code></dt><dd><p>If <code>bind</code> is <code>true</code>, growl.js adds shortcuts for <code>addNotification</code> method, so notifications could be added via <code>growl[type of notification]("Hello!", extra settings)</code>.</p><p>Look at code from demo:</p><pre><code><span class="nx">growl</span><span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="s2">"Page is loaded."</span><span class="p">,</span> <span class="p">{</span><span class="nx">timeout</span><span class="o">:</span> <span class="mi">1000</span><span class="p">});</span>  <span class="c1">// &lt;- test</span>
</code></pre><p>This is equivalent to following:</p><pre><code><span class="nx">growl</span><span class="p">.</span><span class="nx">addNotification</span><span class="p">(</span><span class="s2">"Page is loaded."</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">"success"</span><span class="p">,</span>
    <span class="nx">timeout</span><span class="o">:</span> <span class="mi">1000</span>
<span class="p">});</span>
</code></pre></dd></dl><div><pre><!-- nope: js --><code>growl.addNotification("Page is loaded.", {
    type: "success",
    timeout: 1000
});</code></pre></div><p>After <code>Growl</code> instance is created, you can use it to add notifications with shortcuts (e.g. <code>growl.error(&quot;Put the cookie down!&quot;)</code>) or with <code>addNotification</code> (like I do in <code>setUpPanel</code> function in <code>main.js</code>):</p><pre><code><span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">messageInputEl</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">growl</span><span class="p">.</span><span class="nx">addNotification</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">});</span>  <span class="c1">// type is string, like &quot;error&quot; or &quot;success&quot;</span>
<span class="p">}</span>
</code></pre><p>And that’s it. For “how it may look” look at the <a href="demo/">demo</a>, for “how it’s done” see <a href="demo/main.js"><code>main.js</code></a>.</p></div></div><div class="c-s"><div class="c-s-s"><h6>Note metadata</h6><dl class="nm-l"><dt>Publication date</dt><dd>March 18, 2016</dd><dt>Tags</dt><dd><ol class="t-l"><li><a href="/tags/browsers/">Browsers</a></li><li><a href="/tags/javascript/">JavaScript</a></li></ol></dd></dl></div><div class="c-s-s"><h6>About</h6><p>This blog is about things I encounter while doing web and non-web development (and that are not about Python—these are in <a href="http://py.93z.org">separate blog</a>).</p></div><div class="c-s-s"><h6>Recent notes</h6><ol class="n-l"><li class="a-o"><span class="a">Missing growl.js tutorial</span></li><li><a href="/notes/converting-built-in-theme-of-gnome-terminal-for-urxvt/">Converting built-in theme of GNOME Terminal for urxvt</a></li><li><a href="/notes/how-to-fix-ssl-certificate-for-firefox/">How to fix SSL certificate for Firefox</a></li></ol><p><a href="/notes/">All notes</a></p></div></div></div></div><div class="f"><div class="f-i"><div class="f-a"><p>© 2012–2017 dev.93z.org</p></div><div class="f-s"><ol class="f-nw"><li class="a-o"><a href="/" rel="home" class="a">dev.93z.org</a></li><li><a href="//py.93z.dev">py.93z.org</a></li></ol></div></div></div><script src="/s/scripts.js" type="text/javascript"></script></body></html>